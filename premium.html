.summary-item {
                background: #e9ecef !important;
                color: #000 !important;
                border: 1px solid #666 !important;
                margin: 5px !important;
                font-size: 0.9em !important;
            }
            
            .party {
                background: white !important;
                border: 2px solid #000 !important;
                box-shadow: none !important;
                break-inside: avoid;
                page-break-inside: avoid;
                margin-bottom: 15px !important;
            }
            
            .party h3 {
                background: #000 !important;
                color: white !important;
                font-size: 1.1em !important;
            }
            
            .team {
                background: #f8f9fa !important;
                color: #000 !important;
                border: 1px solid #000 !important;
                font-weight: bold !important;
            }
            
            .vs {
                color: #000 !important;
                font-size: 1.5em !important;
            }
            
            .reserve-players {
                background: #fff3cd !important;
                border: 2px solid #000 !important;
                color: #000 !important;
                page-break-inside: avoid;
            }
            
            .reserve-players h4 {
                color: #000 !important;
            }
            
            .reserve-players p {
                color: #000 !important;
            }
            
            /* Informations de tirage en bas de page */
            .results::after {
                content: "TirageExpress Premium - Tirage g√©n√©r√© le " attr(data-date) " √† " attr(data-time);
                display: block;
                text-align: center;
                font-size: 0.8em;
                color: #666;
                margin-top: 30px;
                padding-top: 20px;
                border-top: 1px solid #ccc;
            }
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (max-width: 800px) {
            .main-content {
                padding: 25px 20px 15px 20px;
            }
            
            .parties-grid {
                grid-template-columns: 1fr;
            }
            
            .type-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .button-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .teams {
                flex-direction: column;
            }
            
            .vs {
                margin: 8px 0;
                font-size: 1.5em;
            }
            
            .summary-item {
                display: block;
                margin: 8px 0;
            }
            
            .header {
                padding: 20px 20px;
            }
            
            .logo-container {
                flex-direction: column;
                gap: 10px;
                min-height: 100px;
            }
            
            .logo-image, .logo-svg {
                height: 100px;
            }
            
            .logo-text {
                font-size: 2.2em;
            }
            
            .header .tagline {
                font-size: 1.1em;
            }
            
            .results-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
                padding-top: 50px;
            }
            
            .container {
                border-radius: 16px;
            }
            
            .main-content {
                padding: 20px 15px 10px 15px;
            }
            
            .player-management {
                padding: 20px;
            }
            
            .results {
                padding: 20px;
            }
            
            .status-bar {
                position: relative;
                bottom: auto;
                right: auto;
                margin-top: 20px;
            }
            
            .express-banner {
                padding: 12px 20px;
                font-size: 0.9em;
            }
        }
        
        /* Am√©liorations pour l'accessibilit√© */
        .btn:focus,
        .type-btn:focus,
        .player-tag:focus {
            outline: 2px solid #2c3e50;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Overlay de protection -->
    <div id="authOverlay" class="auth-overlay">
        <div class="auth-container">
            <div class="premium-badge">‚≠ê TirageExpress Premium</div>
            <h2>Acc√®s R√©serv√© aux Clients</h2>
            <p>
                Vous avez achet√© TirageExpress Premium ? 
                Entrez votre code d'activation re√ßu par email.
            </p>
            
            <input type="password" id="accessCode" class="auth-input" placeholder="Code d'activation Premium" maxlength="17">
            
            <div>
                <button class="auth-btn" onclick="verifyAccess()">üöÄ Acc√©der √† Premium</button>
            </div>
            
            <div class="error-message" id="errorMessage">
                ‚ùå Code incorrect. V√©rifiez votre email ou contactez le support.
            </div>
            
            <p style="margin-top: 30px; font-size: 0.9em; color: #95a5a6;">
                Pas encore client ? 
                <a href="./index.html#tarifs" class="auth-btn-secondary" style="margin: 0;">Acheter Premium</a>
            </p>
        </div>
    </div>

    <!-- Badge Premium discret -->
    <div id="premiumHeader" class="premium-header" style="display: none;">
        ‚≠ê TirageExpress Premium Activ√© - Version Compl√®te avec Optimisation IA
    </div>

    <!-- Application Premium (cach√©e par d√©faut) -->
    <div id="premiumApp" style="display: none;">
        <div class="container">
            <div class="header">
                <div class="logo-container">
                    <img src="https://raw.githubusercontent.com/Kiyataa/tirageexpress-assets/main/Design%20sans%20titre.jpg" alt="TirageExpress" class="logo-image" 
                         onerror="document.getElementById('fallback-logo').style.display='block'; this.style.display='none';"
                         onload="this.style.display='block'; document.getElementById('fallback-logo').style.display='none';">
                    
                    <!-- Fallback SVG si l'image ne charge pas -->
                    <svg id="fallback-logo" width="400" height="100" viewBox="0 0 400 100" class="logo-svg" style="display: none;">
                        <defs>
                            <radialGradient id="ballGradient" cx="30%" cy="30%">
                                <stop offset="0%" stop-color="#c0392b"/>
                                <stop offset="50%" stop-color="#8b1a1a"/>
                                <stop offset="100%" stop-color="#7d1616"/>
                            </radialGradient>
                            <filter id="shadow">
                                <feDropShadow dx="2" dy="4" stdDeviation="3" flood-color="rgba(0,0,0,0.3)"/>
                            </filter>
                        </defs>
                        
                        <!-- Boule principale -->
                        <circle cx="50" cy="50" r="30" fill="url(#ballGradient)" stroke="#2c3e50" stroke-width="2" filter="url(#shadow)"/>
                        
                        <!-- Reflet sur la boule -->
                        <circle cx="42" cy="38" r="6" fill="rgba(255,255,255,0.4)"/>
                        <circle cx="40" cy="36" r="3" fill="rgba(255,255,255,0.6)"/>
                        
                        <!-- Texte TIRAGE -->
                        <text x="90" y="45" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#2c3e50">TIRAGE</text>
                        
                        <!-- Texte EXPRESS -->
                        <text x="90" y="75" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#e74c3c">EXPRESS</text>
                        
                        <!-- Lignes de vitesse -->
                        <line x1="320" y1="35" x2="350" y2="35" stroke="#f39c12" stroke-width="3" opacity="0.8"/>
                        <line x1="325" y1="50" x2="360" y2="50" stroke="#f39c12" stroke-width="3" opacity="0.8"/>
                        <line x1="315" y1="65" x2="345" y2="65" stroke="#f39c12" stroke-width="3" opacity="0.8"/>
                    </svg>
                </div>
                <p class="tagline">Le tirage de p√©tanque en 30 secondes - Premium avec IA</p>
            </div>
            
            <div class="main-content">
                <div class="express-banner">
                    Version Premium : Joueurs illimit√©s ‚Ä¢ Tous types de parties ‚Ä¢ Optimisation intelligente ‚Ä¢ Sauvegarde permanente
                </div>
                
                <div class="form-group">
                    <label>Type de partie (l'IA optimisera automatiquement) :</label>
                    <div class="type-buttons">
                        <div class="type-btn" data-type="tete-a-tete">
                            <span class="icon">üë§</span>
                            T√™te-√†-t√™te<br>
                            <small>(1 vs 1)</small>
                        </div>
                        <div class="type-btn active" data-type="doublette">
                            <span class="icon">üë•</span>
                            Doublette<br>
                            <small>(2 vs 2)</small>
                        </div>
                        <div class="type-btn" data-type="triplette">
                            <span class="icon">üë•üë§</span>
                            Triplette<br>
                            <small>(3 vs 3)</small>
                        </div>
                    </div>
                </div>
                
                <div class="player-management">
                    <h3>üë• Base de donn√©es des joueurs - Premium</h3>
                    <div class="form-group">
                        <label for="nouveauxJoueurs">Ajouter des joueurs √† la base :</label>
                        <textarea id="nouveauxJoueurs" placeholder="Entrez les nouveaux noms, un par ligne :&#10;&#10;Pierre&#10;Marie&#10;Jean&#10;Sophie&#10;Paul&#10;Emma&#10;&#10;‚úÖ Version Premium : Joueurs illimit√©s avec optimisation IA !"></textarea>
                        <div class="button-group">
                            <button class="btn btn-success" onclick="ajouterJoueurs()">
                                ‚ûï Ajouter √† la base
                            </button>
                            <button class="btn btn-secondary" onclick="viderJoueurs()">
                                üóëÔ∏è Vider la base
                            </button>
                        </div>
                    </div>
                    
                    <div id="savedPlayersSection" style="display: none;">
                        <label>Joueurs en base (cliquez pour s√©lectionner pour aujourd'hui) :</label>
                        <div id="savedPlayers" class="saved-players"></div>
                        <div class="help-text">
                            <strong>üí° Version Premium avec IA :</strong> L'intelligence artificielle analyse automatiquement le nombre de joueurs et optimise les types de parties pour minimiser les r√©serves !
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-express" onclick="genererToutesLesParties()">
                        üß† Tirage Express Premium - Optimis√© IA !
                    </button>
                    <button class="btn btn-warning" onclick="remettreJoueurs()">
                        üîÑ S√©lectionner tous
                    </button>
                    <button class="btn btn-secondary" onclick="deselectionnerTous()">
                        ‚ùå D√©s√©lectionner tous
                    </button>
                </div>
                
                <!-- Compteur de parties et recette -->
                <div id="sessionStats" class="session-stats" style="display: none;">
                    <h3>üìä Statistiques de la session</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <span class="stat-icon">üèÜ</span>
                            <div class="stat-info">
                                <div class="stat-number" id="totalParties">0</div>
                                <div class="stat-label">Parties jou√©es</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">üí∞</span>
                            <div class="stat-info">
                                <div class="stat-number" id="recetteTotal">0‚Ç¨</div>
                                <div class="stat-label">Recette (1‚Ç¨/joueur)</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">üë•</span>
                            <div class="stat-info">
                                <div class="stat-number" id="totalJoueurs">0</div>
                                <div class="stat-label">Joueurs actifs</div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="reinitialiserStats()">üîÑ Nouvelle session</button>
                </div>
                
                <div id="messageZone"></div>
                
                <div id="results" class="results" style="display: none;">
                    <h2>üèÜ Vos parties Express Premium (Optimis√©es IA)</h2>
                    <div id="resultsSummary" class="summary"></div>
                    <div id="reserveSection" class="reserve-players" style="display: none;">
                        <h4>‚è≥ Joueurs en r√©serve</h4>
                        <p id="reserveList"></p>
                    </div>
                    <div id="partiesContainer" class="parties-grid"></div>
                    
                    <!-- Boutons d'actions pour les r√©sultats -->
                    <div id="resultsActions" class="results-actions" style="display: none;">
                        <button class="btn btn-primary" onclick="imprimerTirage()">
                            üñ®Ô∏è Imprimer le tirage
                        </button>
                        <button class="btn btn-success" onclick="telechargerPDF()">
                            üìÑ T√©l√©charger PDF
                        </button>
                        <button class="btn btn-warning" onclick="partagerTirage()">
                            üì§ Partager
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                <div class="logo-footer">TirageExpress Premium</div>
                <div class="tagline-footer">Le tirage de p√©tanque en 30 secondes - Version Compl√®te avec IA</div>
                <p>¬© 2025 TirageExpress - <a href="https://tirage-express.com">tirage-express.com</a></p>
                <p>Joueurs illimit√©s ‚Ä¢ Tous types de parties ‚Ä¢ Optimisation IA ‚Ä¢ Impression PDF ‚Ä¢ Statistiques</p>
            </div>
        </div>
        
        <div id="statusBar" class="status-bar">
            <span id="statusText">TirageExpress Premium pr√™t</span>
        </div>
    </div>

    <script>
        // Variables globales de l'app
        let typePartie = 'doublette';
        let joueursDisponibles = [];
        let joueursSelectionnes = [];

        // Variables pour les statistiques de session
        let statistiquesSession = {
            totalParties: 0,
            totalRecette: 0,
            joueursActifs: 0,
            sessionsEffectuees: 0
        };

        // Charger les statistiques de session
        function chargerStatistiquesSession() {
            try {
                if (isLocalStorageAvailable()) {
                    const stats = localStorage.getItem('tirageexpress_premium_stats');
                    if (stats) {
                        statistiquesSession = JSON.parse(stats);
                        mettreAJourAffichageStats();
                    }
                }
            } catch (e) {
                console.error('Erreur chargement stats:', e);
            }
        }

        // Sauvegarder les statistiques de session
        function sauvegarderStatistiquesSession() {
            try {
                if (isLocalStorageAvailable()) {
                    localStorage.setItem('tirageexpress_premium_stats', JSON.stringify(statistiquesSession));
                }
            } catch (e) {
                console.error('Erreur sauvegarde stats:', e);
            }
        }

        // Mettre √† jour l'affichage des statistiques
        function mettreAJourAffichageStats() {
            const totalPartiesElement = document.getElementById('totalParties');
            const recetteTotalElement = document.getElementById('recetteTotal');
            const totalJoueursElement = document.getElementById('totalJoueurs');
            
            if (totalPartiesElement) totalPartiesElement.textContent = statistiquesSession.totalParties;
            if (recetteTotalElement) recetteTotalElement.textContent = `${statistiquesSession.totalRecette}‚Ç¨`;
            if (totalJoueursElement) totalJoueursElement.textContent = statistiquesSession.joueursActifs;
            
            // Afficher la section stats si il y a des donn√©es
            const sessionStatsSection = document.getElementById('sessionStats');
            if (sessionStatsSection && statistiquesSession.totalParties > 0) {
                sessionStatsSection.style.display = 'block';
            }
        }

        // R√©initialiser les statistiques
        function reinitialiserStats() {
            if (confirm('√ätes-vous s√ªr de vouloir r√©initialiser les statistiques de la session ?')) {
                statistiquesSession = {
                    totalParties: 0,
                    totalRecette: 0,
                    joueursActifs: 0,
                    sessionsEffectuees: 0
                };
                sauvegarderStatistiquesSession();
                mettreAJourAffichageStats();
                document.getElementById('sessionStats').style.display = 'none';
                afficherMessage('üìä Statistiques r√©initialis√©es ! Nouvelle session d√©marr√©e.', 'success');
            }
        }

        // Fonction d'impression optimis√©e
        function imprimerTirage() {
            // Pr√©parer les donn√©es pour l'impression
            const resultsSection = document.getElementById('results');
            if (!resultsSection || resultsSection.style.display === 'none') {
                afficherMessage('‚ùå Aucun tirage √† imprimer. G√©n√©rez d'abord un tirage.', 'error');
                return;
            }
            
            // Ajouter les m√©tadonn√©es de date/heure pour l'impression
            const maintenant = new Date();
            const date = maintenant.toLocaleDateString('fr-FR');
            const heure = maintenant.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            
            resultsSection.setAttribute('data-date', date);
            resultsSection.setAttribute('data-time', heure);
            
            // D√©clencher l'impression
            window.print();
            
            afficherStatut('Impression en cours...');
        }

        // Fonction de t√©l√©chargement PDF (simulation - n√©cessiterait une vraie librairie PDF)
        function telechargerPDF() {
            afficherMessage('üìÑ Fonctionnalit√© PDF en d√©veloppement. Utilisez l\'impression pour l\'instant.', 'success');
            // Dans une vraie impl√©mentation, on utiliserait jsPDF ou similar
            setTimeout(() => imprimerTirage(), 1000);
        }

        // Fonction de partage
        function partagerTirage() {
            const resultsSection = document.getElementById('results');
            if (!resultsSection || resultsSection.style.display === 'none') {
                afficherMessage('‚ùå Aucun tirage √† partager. G√©n√©rez d'abord un tirage.', 'error');
                return;
            }
            
            // Cr√©er un texte partageable
            const totalParties = document.querySelectorAll('.party').length;
            const totalJoueurs = joueursSelectionnes.length;
            const joueursReserve = document.getElementById('reserveList')?.textContent || '';
            
            let textePartage = `üèÜ TirageExpress Premium - Tirage g√©n√©r√©\n\n`;
            textePartage += `üìä ${totalParties} partie(s) - ${totalJoueurs} joueurs\n`;
            if (joueursReserve) {
                textePartage += `‚è≥ R√©serve: ${joueursReserve}\n`;
            }
            textePartage += `\nüéØ Parties:\n`;
            
            document.querySelectorAll('.party').forEach((partie, index) => {
                const titre = partie.querySelector('h3').textContent;
                const equipes = partie.querySelectorAll('.team');
                if (equipes.length === 2) {
                    const equipe1 = equipes[0].textContent.replace(/\n/g, ' + ');
                    const equipe2 = equipes[1].textContent.replace(/\n/g, ' + ');
                    textePartage += `${titre}: ${equipe1} VS ${equipe2}\n`;
                }
            });
            
            textePartage += `\n‚ö° G√©n√©r√© par TirageExpress Premium`;
            
            // Essayer l'API de partage native
            if (navigator.share) {
                navigator.share({
                    title: 'TirageExpress Premium - Tirage',
                    text: textePartage
                }).then(() => {
                    afficherStatut('Tirage partag√© avec succ√®s !');
                }).catch(() => {
                    copierDansClipboard(textePartage);
                });
            } else {
                copierDansClipboard(textePartage);
            }
        }

        // Copier dans le clipboard
        function copierDansClipboard(texte) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(texte).then(() => {
                    afficherMessage('üìã Tirage copi√© dans le presse-papiers !', 'success');
                }).catch(() => {
                    fallbackCopy(texte);
                });
            } else {
                fallbackCopy(texte);
            }
        }

        // M√©thode de copie fallback
        function fallbackCopy(texte) {
            const textarea = document.createElement('textarea');
            textarea.value = texte;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                afficherMessage('üìã Tirage copi√© dans le presse-papiers !', 'success');
            } catch (err) {
                afficherMessage('‚ùå Impossible de copier. S√©lectionnez manuellement le texte.', 'error');
            }
            document.body.removeChild(textarea);
        }

        const premiumCodes = [
            'PREMIUM2025A',
            'PREMIUM2025B', 
            'PREMIUM2025C',
            'PREMIUM2025D',
            'PREMIUM2025E',
            'PREMIUM2025QFS857',
            'PREMIUM2025R0V073',
        ];
        
        function verifyAccess() {
            const enteredCode = document.getElementById('accessCode').value.trim().toUpperCase();
            const errorDiv = document.getElementById('errorMessage');
            
            console.log('üîç Code test√©:', enteredCode);
            
            // Codes fixes de base
            const fixedCodes = [
                'PREMIUM2025A', 'PREMIUM2025B', 'PREMIUM2025C', 'PREMIUM2025D', 'PREMIUM2025E'
            ];
            
            // Pattern pour codes auto-g√©n√©r√©s : PREMIUM2025 + 3 caract√®res alphanum√©riques + 3 chiffres
            const autoPattern = /^PREMIUM2025[A-Z0-9]{3}[0-9]{3}$/;
            const proPattern = /^PRO2025[A-Z0-9]{3}[0-9]{3}$/;
            
            // Tests de validation
            const isFixedCode = fixedCodes.includes(enteredCode);
            const isAutoCode = autoPattern.test(enteredCode);
            const isProCode = proPattern.test(enteredCode);
            
            console.log('‚úì Code fixe?', isFixedCode);
            console.log('‚úì Code auto Premium?', isAutoCode);
            console.log('‚úì Code auto Pro?', isProCode);
            
            if (isFixedCode || isAutoCode || isProCode) {
                console.log('üéâ ACC√àS ACCORD√â !');
                
                // Cacher l'overlay et afficher l'app
                document.getElementById('authOverlay').style.display = 'none';
                document.getElementById('premiumApp').style.display = 'block';
                document.getElementById('premiumHeader').style.display = 'block';
                
                // Sauvegarder l'acc√®s
                sessionStorage.setItem('tirageexpress_premium', 'true');
                sessionStorage.setItem('tirageexpress_code', enteredCode);
                
                // Initialiser l'application
                initializeApp();
                
            } else {
                console.log('‚ùå ACC√àS REFUS√â');
                console.log('Pattern attendu: PREMIUM2025[A-Z0-9]{3}[0-9]{3}');
                
                errorDiv.style.display = 'block';
                document.getElementById('accessCode').value = '';
                document.getElementById('accessCode').focus();
            }
        }
        
        // Permettre la validation avec Entr√©e
        document.getElementById('accessCode').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                verifyAccess();
            }
        });
        
        // V√©rifier si d√©j√† connect√© dans cette session
        window.addEventListener('load', function() {
            if (sessionStorage.getItem('tirageexpress_premium') === 'true') {
                document.getElementById('authOverlay').style.display = 'none';
                document.getElementById('premiumApp').style.display = 'block';
                document.getElementById('premiumHeader').style.display = 'block';
                initializeApp();
            }
        });
        
        // Initialiser l'application Premium
        function initializeApp() {
            chargerDonnees();
            chargerStatistiquesSession();
            afficherJoueurs();
            mettreAJourAffichageStats();
            afficherStatut('TirageExpress Premium charg√© !');
            
            // Message de bienvenue Premium
            setTimeout(() => {
                afficherMessage('üéâ Bienvenue dans TirageExpress Premium ! Toutes les fonctionnalit√©s sont d√©bloqu√©es.', 'success');
            }, 1000);
        }
        
        // === FONCTIONS DE L'APPLICATION PREMIUM ===
        
        // V√©rifier la compatibilit√© du localStorage
        function isLocalStorageAvailable() {
            try {
                const test = '__localStorage_test__';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                return true;
            } catch (e) {
                return false;
            }
        }
        
        // Sauvegarder les donn√©es dans le localStorage
        function sauvegarderDonnees() {
            const donnees = {
                joueurs: joueursDisponibles,
                typePartie: typePartie,
                dateModification: new Date().toISOString(),
                version: '3.0',
                app: 'TirageExpress_Premium'
            };
            
            try {
                if (isLocalStorageAvailable()) {
                    localStorage.setItem('tirageexpress_premium_data', JSON.stringify(donnees));
                    afficherStatut('Donn√©es Premium sauvegard√©es');
                } else {
                    window.tirageexpressPremiumData = donnees;
                    afficherStatut('Donn√©es Premium en m√©moire');
                }
            } catch (e) {
                console.error('Erreur de sauvegarde:', e);
                afficherStatut('Erreur de sauvegarde', 'error');
            }
        }
        
        // Charger les donn√©es depuis le localStorage
        function chargerDonnees() {
            try {
                let donnees = null;
                
                if (isLocalStorageAvailable()) {
                    let donneesString = localStorage.getItem('tirageexpress_premium_data');
                    if (donneesString) {
                        donnees = JSON.parse(donneesString);
                    } else {
                        // Migration depuis version gratuite
                        donneesString = localStorage.getItem('tirageexpress_data');
                        if (donneesString) {
                            const anciennesDonnees = JSON.parse(donneesString);
                            donnees = {
                                joueurs: anciennesDonnees.joueurs || [],
                                typePartie: anciennesDonnees.typePartie || 'doublette',
                                dateModification: new Date().toISOString(),
                                version: '3.0',
                                app: 'TirageExpress_Premium'
                            };
                            localStorage.setItem('tirageexpress_premium_data', JSON.stringify(donnees));
                            afficherMessage('üîÑ Donn√©es migr√©es vers Premium !', 'success');
                        }
                    }
                }
                
                if (donnees) {
                    joueursDisponibles = donnees.joueurs || [];
                    if (donnees.typePartie) {
                        typePartie = donnees.typePartie;
                        document.querySelectorAll('.type-btn').forEach(btn => {
                            btn.classList.toggle('active', btn.dataset.type === typePartie);
                        });
                    }
                    joueursSelectionnes = [...joueursDisponibles];
                    
                    if (donnees.dateModification) {
                        const dateModif = new Date(donnees.dateModification);
                        afficherMessage(`üìÖ Donn√©es Premium charg√©es (${dateModif.toLocaleDateString('fr-FR')})`, 'success');
                    }
                    
                    afficherStatut('TirageExpress Premium initialis√©');
                } else {
                    joueursDisponibles = [];
                    joueursSelectionnes = [];
                    afficherStatut('Nouvelle session Premium');
                }
            } catch (e) {
                console.error('Erreur de chargement:', e);
                joueursDisponibles = [];
                joueursSelectionnes = [];
                afficherStatut('Erreur de chargement', 'error');
            }
        }
        
        // Afficher le statut dans la barre de statut
        function afficherStatut(message, type = 'info') {
            const statusBar = document.getElementById('statusBar');
            const statusText = document.getElementById('statusText');
            
            if (statusBar && statusText) {
                statusText.textContent = message;
                statusBar.className = `status-bar show ${type}`;
                
                setTimeout(() => {
                    statusBar.classList.remove('show');
                }, 3000);
            }
        }
        
        // Gestion des boutons de type
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('type-btn')) {
                document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                typePartie = e.target.dataset.type;
                sauvegarderDonnees();
                afficherStatut(`Mode ${typePartie} Premium s√©lectionn√©`);
            }
        });
        
        // Fonction d'optimisation automatique des tirages Premium
        function optimiserTiragesAutomatique(joueursSelectionnes, typePreference = 'doublette') {
            const nombreJoueurs = joueursSelectionnes.length;
            
            // Analyser tous les sc√©narios possibles
            const scenarios = [];
            
            // Scenario 1: Doublettes uniquement (4 joueurs par partie)
            const doublettes = Math.floor(nombreJoueurs / 4);
            const reserveDoublettes = nombreJoueurs % 4;
            scenarios.push({
                type: 'doublettes',
                description: 'Doublettes uniquement',
                doublettes: doublettes,
                triplettes: 0,
                teteatete: 0,
                reserve: reserveDoublettes,
                joueursEnJeu: doublettes * 4,
                parties: doublettes,
                efficacite: ((doublettes * 4) / nombreJoueurs * 100).toFixed(1)
            });
            
            // Scenario 2: Triplettes uniquement (6 joueurs par partie)
            const triplettes = Math.floor(nombreJoueurs / 6);
            const reserveTriplettes = nombreJoueurs % 6;
            scenarios.push({
                type: 'triplettes',
                description: 'Triplettes uniquement',
                doublettes: 0,
                triplettes: triplettes,
                teteatete: 0,
                reserve: reserveTriplettes,
                joueursEnJeu: triplettes * 6,
                parties: triplettes,
                efficacite: ((triplettes * 6) / nombreJoueurs * 100).toFixed(1)
            });
            
            // Scenario 3: Mix optimal doublettes + triplettes
            let meilleurMix = { reserve: nombreJoueurs, parties: 0 };
            
            for (let t = 0; t <= Math.floor(nombreJoueurs / 6); t++) {
                const restantApresTriplettes = nombreJoueurs - (t * 6);
                const d = Math.floor(restantApresTriplettes / 4);
                const reserve = restantApresTriplettes % 4;
                const parties = d + t;
                const joueursEnJeu = (d * 4) + (t * 6);
                
                // Prioriser : moins de r√©serve, puis plus de parties
                if (reserve < meilleurMix.reserve || 
                    (reserve === meilleurMix.reserve && parties > meilleurMix.parties)) {
                    meilleurMix = {
                        type: 'mixte',
                        description: `Mix: ${d} doublette(s) + ${t} triplette(s)`,
                        doublettes: d,
                        triplettes: t,
                        teteatete: 0,
                        reserve: reserve,
                        joueursEnJeu: joueursEnJeu,
                        parties: parties,
                        efficacite: (joueursEnJeu / nombreJoueurs * 100).toFixed(1)
                    };
                }
            }
            scenarios.push(meilleurMix);
            
            // Scenario 4: T√™te-√†-t√™te (pour petits groupes)
            if (nombreJoueurs <= 8) {
                const teteatete = Math.floor(nombreJoueurs / 2);
                const reserveTete = nombreJoueurs % 2;
                scenarios.push({
                    type: 'tete-a-tete',
                    description: 'T√™te-√†-t√™te uniquement',
                    doublettes: 0,
                    triplettes: 0,
                    teteatete: teteatete,
                    reserve: reserveTete,
                    joueursEnJeu: teteatete * 2,
                    parties: teteatete,
                    efficacite: ((teteatete * 2) / nombreJoueurs * 100).toFixed(1)
                });
            }
            
            // Trouver le sc√©nario optimal
            const scenarioOptimal = scenarios.reduce((best, current) => {
                // Prioriser d'abord le moins de r√©serve
                if (current.reserve < best.reserve) return current;
                if (current.reserve > best.reserve) return best;
                
                // Si √©galit√© de r√©serve, prioriser le plus de parties
                if (current.parties > best.parties) return current;
                if (current.parties < best.parties) return best;
                
                // Si √©galit√© compl√®te, prioriser selon la pr√©f√©rence utilisateur
                if (current.type === typePreference) return current;
                
                return best;
            });
            
            return {
                nombreJoueurs,
                scenarios,
                optimal: scenarioOptimal
            };
        }

        // G√©n√©rer les parties selon le sc√©nario optimal
        function genererPartiesOptimales(joueursSelectionnes, scenarioOptimal) {
            const joueursMelanges = melanger([...joueursSelectionnes]);
            const parties = [];
            const joueursReserve = [];
            let index = 0;
            let numeroPartie = 1;
            
            // G√©n√©rer les triplettes d'abord (plus de joueurs par partie)
            for (let i = 0; i < scenarioOptimal.triplettes; i++) {
                const equipe1 = joueursMelanges.slice(index, index + 3);
                const equipe2 = joueursMelanges.slice(index + 3, index + 6);
                parties.push({
                    numero: numeroPartie++,
                    type: 'Triplette',
                    equipe1: equipe1,
                    equipe2: equipe2,
                    tailleEquipe: 3
                });
                index += 6;
            }
            
            // G√©n√©rer les doublettes
            for (let i = 0; i < scenarioOptimal.doublettes; i++) {
                const equipe1 = joueursMelanges.slice(index, index + 2);
                const equipe2 = joueursMelanges.slice(index + 2, index + 4);
                parties.push({
                    numero: numeroPartie++,
                    type: 'Doublette',
                    equipe1: equipe1,
                    equipe2: equipe2,
                    tailleEquipe: 2
                });
                index += 4;
            }
            
            // G√©n√©rer les t√™te-√†-t√™te
            for (let i = 0; i < scenarioOptimal.teteatete; i++) {
                const equipe1 = [joueursMelanges[index]];
                const equipe2 = [joueursMelanges[index + 1]];
                parties.push({
                    numero: numeroPartie++,
                    type: 'T√™te-√†-t√™te',
                    equipe1: equipe1,
                    equipe2: equipe2,
                    tailleEquipe: 1
                });
                index += 2;
            }
            
            // Joueurs en r√©serve
            joueursReserve.push(...joueursMelanges.slice(index));
            
            return { parties, joueursReserve };
        }

        // G√©n√©rer toutes les parties avec optimisation Premium
        function genererToutesLesParties() {
            if (joueursSelectionnes.length < 2) {
                afficherMessage('‚ùå Il faut minimum 2 joueurs pour organiser des parties.', 'error');
                return;
            }
            
            afficherStatut('Analyse optimale Premium en cours...');
            
            const startTime = Date.now();
            
            // Analyser et optimiser
            const analyse = optimiserTiragesAutomatique(joueursSelectionnes, typePartie);
            const resultat = genererPartiesOptimales(joueursSelectionnes, analyse.optimal);
            
            const endTime = Date.now();
            const tempsGeneration = (endTime - startTime) / 1000;
            
            // Afficher les r√©sultats avec informations d'optimisation
            afficherResultatsOptimises(resultat, analyse, tempsGeneration);
            
            // Mettre √† jour les statistiques de session
            statistiquesSession.totalParties += resultat.parties.length;
            const joueursEnJeu = resultat.parties.reduce((total, partie) => total + (partie.tailleEquipe * 2), 0);
            statistiquesSession.totalRecette = joueursEnJeu * 1; // 1‚Ç¨ par joueur en jeu
            statistiquesSession.joueursActifs = joueursSelectionnes.length;
            statistiquesSession.sessionsEffectuees += 1;
            sauvegarderStatistiquesSession();
            mettreAJourAffichageStats();
            
            // Afficher les boutons d'action
            const resultsActions = document.getElementById('resultsActions');
            if (resultsActions) {
                resultsActions.style.display = 'flex';
            }
            
            const joueursEnJeuCalcul = resultat.parties.reduce((total, partie) => total + (partie.tailleEquipe * 2), 0);
            
            let messageOptimisation = '';
            if (analyse.optimal.type === 'mixte') {
                messageOptimisation = ` (Mix optimis√© : ${analyse.optimal.doublettes} doublette(s) + ${analyse.optimal.triplettes} triplette(s))`;
            } else if (analyse.optimal.type !== typePartie) {
                messageOptimisation = ` (Auto-optimis√© vers ${analyse.optimal.description})`;
            }
            
            afficherMessage(
                `üéâ Premium : ${resultat.parties.length} partie(s) g√©n√©r√©e(s) en ${tempsGeneration.toFixed(1)}s ! ` +
                `${joueursEnJeuCalcul} joueurs en jeu, ${resultat.joueursReserve.length} en r√©serve` +
                messageOptimisation,
                'success'
            );
            
            afficherStatut(`${resultat.parties.length} parties Premium optimis√©es`);
        }

        // Afficher les r√©sultats avec informations d'optimisation
        function afficherResultatsOptimises(resultat, analyse, tempsGeneration) {
            const section = document.getElementById('results');
            const summary = document.getElementById('resultsSummary');
            const reserveSection = document.getElementById('reserveSection');
            const reserveList = document.getElementById('reserveList');
            const container = document.getElementById('partiesContainer');
            
            if (!section || !summary || !container) return;
            
            // Calculer les totaux
            const totalParties = resultat.parties.length;
            const joueursEnJeu = resultat.parties.reduce((total, partie) => total + (partie.tailleEquipe * 2), 0);
            const joueursReserve = resultat.joueursReserve.length;
            
            // Afficher le r√©sum√© avec informations d'optimisation
            let optimisationInfo = '';
            if (analyse.optimal.type === 'mixte') {
                optimisationInfo = `<div class="summary-item optimization">üß† Mix optimis√©</div>`;
            } else if (analyse.optimal.type !== typePartie) {
                optimisationInfo = `<div class="summary-item optimization">‚ö° Auto-optimis√©</div>`;
            }
            
            summary.innerHTML = `
                <div class="summary-item">üë• ${joueursSelectionnes.length} joueurs s√©lectionn√©s</div>
                <div class="summary-item">üèÜ ${totalParties} parties g√©n√©r√©es</div>
                <div class="summary-item">‚öΩ ${joueursEnJeu} joueurs en jeu</div>
                <div class="summary-item">‚è≥ ${joueursReserve} en r√©serve</div>
                <div class="summary-item">üìä ${analyse.optimal.efficacite}% efficacit√©</div>
                ${optimisationInfo}
            `;
            
            // Gestion des joueurs en r√©serve
            if (joueursReserve > 0 && reserveSection && reserveList) {
                reserveSection.style.display = 'block';
                reserveList.textContent = resultat.joueursReserve.join(', ');
            } else if (reserveSection) {
                reserveSection.style.display = 'none';
            }
            
            // Afficher les parties avec leur type
            container.innerHTML = '';
            resultat.parties.forEach((partie, index) => {
                const div = document.createElement('div');
                div.className = 'party';
                div.style.opacity = '0';
                div.style.transform = 'translateY(30px)';
                
                div.innerHTML = `
                    <h3>Partie Premium ${partie.numero} (${partie.type})</h3>
                    <div class="teams">
                        <div class="team">${partie.equipe1.join('<br>')}</div>
                        <div class="vs">VS</div>
                        <div class="team">${partie.equipe2.join('<br>')}</div>
                    </div>
                `;
                
                container.appendChild(div);
                
                setTimeout(() => {
                    div.style.transition = 'all 0.5s ease';
                    div.style.opacity = '1';
                    div.style.transform = 'translateY(0)';
                }, index * 100);
            });
            
            section.style.display = 'block';
            
            // Afficher les informations d'optimisation si applicable
            if (analyse.optimal.type === 'mixte' && analyse.optimal.reserve === 0) {
                setTimeout(() => {
                    afficherMessage(`üéØ Optimisation parfaite ! Mix automatique : ${analyse.optimal.doublettes} doublette(s) + ${analyse.optimal.triplettes} triplette(s) = 0 joueur en r√©serve !`, 'success');
                }, 1000);
            }
            
            // Ajouter la date de g√©n√©ration pour l'impression
            const maintenant = new Date();
            section.setAttribute('data-date', maintenant.toLocaleDateString('fr-FR'));
            section.setAttribute('data-time', maintenant.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' }));
            
            setTimeout(() => {
                section.scrollIntoView({ behavior: 'smooth' });
            }, 500);
        }
        
        // Ajouter des joueurs (ILLIMIT√â en Premium)
        function ajouterJoueurs() {
            const nouveauxJoueursTexte = document.getElementById('nouveauxJoueurs').value.trim();
            if (!nouveauxJoueursTexte) {
                afficherMessage('‚ö†Ô∏è Veuillez entrer au moins un nom de joueur.', 'error');
                return;
            }
            
            const nouveauxJoueurs = nouveauxJoueursTexte.split('\n')
                .map(nom => nom.trim())
                .filter(nom => nom)
                .filter(nom => !joueursDisponibles.includes(nom));
            
            if (nouveauxJoueurs.length === 0) {
                afficherMessage('‚ö†Ô∏è Tous ces joueurs sont d√©j√† dans la base Premium.', 'error');
                return;
            }
            
            joueursDisponibles.push(...nouveauxJoueurs);
            joueursSelectionnes.push(...nouveauxJoueurs);
            
            document.getElementById('nouveauxJoueurs').value = '';
            afficherJoueurs();
            sauvegarderDonnees();
            
            afficherMessage(`‚úÖ ${nouveauxJoueurs.length} joueur(s) ajout√©(s) √† Premium : ${nouveauxJoueurs.join(', ')}`, 'success');
            afficherStatut(`${nouveauxJoueurs.length} joueur(s) ajout√©(s) Premium`);
        }
        
        // Afficher les joueurs avec animation
        function afficherJoueurs() {
            const section = document.getElementById('savedPlayersSection');
            const container = document.getElementById('savedPlayers');
            
            if (!section || !container) return;
            
            if (joueursDisponibles.length === 0) {
                section.style.display = 'none';
                return;
            }
            
            section.style.display = 'block';
            container.innerHTML = '';
            
            joueursDisponibles.forEach((joueur, index) => {
                const tag = document.createElement('div');
                tag.className = 'player-tag';
                tag.textContent = joueur;
                tag.tabIndex = 0;
                
                tag.style.opacity = '0';
                tag.style.transform = 'translateY(20px)';
                
                if (joueursSelectionnes.includes(joueur)) {
                    tag.classList.add('selected');
                } else {
                    tag.classList.add('inactive');
                }
                
                const togglePlayer = () => {
                    if (joueursSelectionnes.includes(joueur)) {
                        joueursSelectionnes = joueursSelectionnes.filter(j => j !== joueur);
                        tag.classList.remove('selected');
                        tag.classList.add('inactive');
                        afficherStatut(`${joueur} d√©s√©lectionn√©`);
                    } else {
                        joueursSelectionnes.push(joueur);
                        tag.classList.add('selected');
                        tag.classList.remove('inactive');
                        afficherStatut(`${joueur} s√©lectionn√© Premium`);
                    }
                };
                
                tag.addEventListener('click', togglePlayer);
                tag.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        togglePlayer();
                    }
                });
                
                container.appendChild(tag);
                
                setTimeout(() => {
                    tag.style.transition = 'all 0.3s ease';
                    tag.style.opacity = '1';
                    tag.style.transform = 'translateY(0)';
                }, index * 50);
            });
        }
        
        // Remettre tous les joueurs
        function remettreJoueurs() {
            joueursSelectionnes = [...joueursDisponibles];
            afficherJoueurs();
            afficherMessage('üîÑ Tous les joueurs Premium ont √©t√© s√©lectionn√©s !', 'success');
            afficherStatut('Tous les joueurs Premium s√©lectionn√©s');
        }
        
        // D√©s√©lectionner tous les joueurs
        function deselectionnerTous() {
            joueursSelectionnes = [];
            afficherJoueurs();
            afficherMessage('‚ùå Tous les joueurs ont √©t√© d√©s√©lectionn√©s !', 'success');
            afficherStatut('Tous les joueurs d√©s√©lectionn√©s');
        }
        
        // Vider la liste des joueurs
        function viderJoueurs() {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer tous les joueurs de la base Premium ?')) {
                joueursDisponibles = [];
                joueursSelectionnes = [];
                const results = document.getElementById('results');
                if (results) results.style.display = 'none';
                afficherJoueurs();
                sauvegarderDonnees();
                afficherMessage('üóëÔ∏è Base de donn√©es Premium vid√©e.', 'success');
                afficherStatut('Base Premium vid√©e');
            }
        }
        
        // Afficher un message
        function afficherMessage(message, type) {
            const zone = document.getElementById('messageZone');
            if (zone) {
                zone.innerHTML = `<div class="${type}">${message}</div>`;
                setTimeout(() => {
                    zone.innerHTML = '';
                }, 5000);
            }
        }
        
        // Fonction de m√©lange Fisher-Yates
        function melanger(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }
        
        // Protection contre l'inspection du code
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'C') ||
                (e.ctrlKey && e.key === 'U')) {
                e.preventDefault();
                alert('Acc√®s au code source restreint pour les clients Premium.');
            }
        });
        
        // Protection contre le clic droit
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            alert('Clic droit d√©sactiv√© pour prot√©ger le contenu Premium.');
        });
    </script>
</body>
</html>
                    joueursDisponibles = donnees<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- M√©tadonn√©es Premium -->
    <title>TirageExpress Premium - Application Compl√®te avec Optimisation</title>
    <meta name="description" content="TirageExpress Premium : Application compl√®te avec joueurs illimit√©s, tous types de parties, optimisation intelligente et sauvegarde.">
    <meta name="robots" content="noindex, nofollow">
    
    <style>
        /* Styles de protection */
        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .auth-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .auth-container h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .auth-container p {
            color: #7f8c8d;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .auth-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.1em;
            text-align: center;
        }
        
        .auth-input:focus {
            outline: none;
            border-color: #e74c3c;
        }
        
        .auth-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 10px;
        }
        
        .auth-btn-secondary {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        
        .premium-badge {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            margin-bottom: 20px;
            display: inline-block;
        }
        
        .error-message {
            color: #e74c3c;
            margin-top: 15px;
            display: none;
        }
        
        /* Badge Premium discret en haut */
        .premium-header {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 8px 20px;
            text-align: center;
            font-weight: 600;
            font-size: 0.9em;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        /* Styles pour l'app compl√®te */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 50%, #2c3e50 100%);
            min-height: 100vh;
            padding: 15px;
            margin: 0;
            line-height: 1.6;
            padding-top: 50px; /* Espace pour le badge premium */
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 25px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #e74c3c, rgba(255,255,255,0.3), #2c3e50);
        }
        
        .header::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.3; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.1; }
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
            min-height: 120px;
        }
        
        .logo-image, .logo-svg {
            height: 120px;
            width: auto;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
            transition: all 0.3s ease;
            background: transparent;
            max-width: 100%;
            object-fit: contain;
        }
        
        .logo-image:hover, .logo-svg:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 6px 12px rgba(0,0,0,0.4));
        }
        
        .logo-text {
            font-size: 2.8em;
            font-weight: 700;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            letter-spacing: -1px;
        }
        
        .header .tagline {
            font-size: 1.2em;
            opacity: 0.95;
            font-weight: 400;
            position: relative;
            z-index: 1;
            margin-top: 5px;
            font-style: italic;
        }
        
        .main-content {
            padding: 35px 40px 25px 40px;
        }
        
        .express-banner {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .express-banner::before {
            content: '‚ö°';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5em;
            animation: pulse 2s ease-in-out infinite;
        }
        
        .express-banner::after {
            content: 'üß†';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5em;
            animation: pulse 2s ease-in-out infinite 1s;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.5; transform: translateY(-50%) scale(1); }
            50% { opacity: 1; transform: translateY(-50%) scale(1.2); }
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1em;
        }
        
        select, textarea, input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            font-family: inherit;
        }
        
        select:focus, textarea:focus, input:focus {
            outline: none;
            border-color: #2c3e50;
            box-shadow: 0 0 0 4px rgba(44, 62, 80, 0.1);
            background: white;
        }
        
        textarea {
            resize: vertical;
            min-height: 110px;
        }
        
        .type-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 18px;
        }
        
        .type-btn {
            flex: 1;
            padding: 18px 16px;
            border: 2px solid #e1e8ed;
            border-radius: 16px;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-size: 15px;
            font-weight: 600;
            color: #2c3e50;
            position: relative;
            overflow: hidden;
        }
        
        .type-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s ease;
        }
        
        .type-btn:hover::before {
            left: 100%;
        }
        
        .type-btn:hover {
            border-color: #2c3e50;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(44, 62, 80, 0.15);
        }
        
        .type-btn.active {
            border-color: #2c3e50;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(44, 62, 80, 0.25);
        }
        
        .type-btn .icon {
            font-size: 1.8em;
            margin-bottom: 8px;
            display: block;
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 18px;
        }
        
        .btn {
            flex: 1;
            padding: 16px 20px;
            border: none;
            border-radius: 14px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }
        
        .btn-express {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            font-size: 1.2em;
            padding: 18px 24px;
            box-shadow: 0 6px 20px rgba(243, 156, 18, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .player-management {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #e1e8ed;
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        
        .player-management h3 {
            color: #2c3e50;
            margin-bottom: 18px;
            text-align: center;
            font-size: 1.4em;
            font-weight: 600;
        }
        
        .saved-players {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }
        
        .player-tag {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 10px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .player-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .player-tag:hover::before {
            left: 100%;
        }
        
        .player-tag:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 20px rgba(44, 62, 80, 0.3);
        }
        
        .player-tag.selected {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border-color: rgba(255,255,255,0.3);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }
        
        .player-tag.inactive {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            opacity: 0.7;
            transform: scale(0.95);
        }
        
        /* Styles pour les statistiques de session */
        .session-stats {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            border: 2px solid #27ae60;
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.2);
        }
        
        .session-stats h3 {
            color: #2e7d32;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.4em;
            font-weight: 600;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #e8f5e8;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.2);
            border-color: #27ae60;
        }
        
        .stat-icon {
            font-size: 2em;
            display: block;
            margin-bottom: 10px;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: 700;
            color: #2e7d32;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #666;
            font-weight: 500;
        }
        
        .results {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 2px solid #e1e8ed;
            border-radius: 20px;
            padding: 30px;
            margin: 25px 0 15px 0;
            box-shadow: 0 6px 25px rgba(0,0,0,0.08);
        }
        
        .results h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-size: 2.2em;
            font-weight: 700;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .summary {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid #e1e8ed;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        
        .summary-item {
            display: inline-block;
            margin: 6px 12px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1em;
            box-shadow: 0 4px 15px rgba(44, 62, 80, 0.2);
            transition: all 0.3s ease;
        }
        
        .summary-item.optimization {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }
        
        .summary-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(44, 62, 80, 0.3);
        }
        
        .parties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }
        
        .party {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e1e8ed;
            animation: slideIn 0.5s ease-out;
            transition: all 0.3s ease;
        }
        
        .party:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }
        
        .party h3 {
            color: white;
            margin-bottom: 16px;
            text-align: center;
            font-size: 1.3em;
            font-weight: 600;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 12px;
            border-radius: 12px;
            margin: -8px -8px 16px -8px;
            box-shadow: 0 4px 15px rgba(44, 62, 80, 0.2);
        }
        
        .teams {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .team {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 16px 20px;
            border-radius: 14px;
            margin: 8px;
            text-align: center;
            font-weight: 600;
            font-size: 1em;
            min-width: 140px;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.25);
            transition: all 0.3s ease;
        }
        
        .team:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.35);
        }
        
        .vs {
            font-size: 1.8em;
            font-weight: 700;
            color: #2c3e50;
            margin: 0 15px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .reserve-players {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            border: 2px solid #ffa726;
            padding: 20px;
            border-radius: 16px;
            margin-top: 16px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 167, 38, 0.2);
        }
        
        .reserve-players h4 {
            color: #ef6c00;
            margin-bottom: 12px;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .reserve-players p {
            color: #e65100;
            font-weight: 500;
            font-size: 1em;
        }
        
        /* Styles pour les actions des r√©sultats */
        .results-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border: 2px solid #e1e8ed;
        }
        
        .error {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border: 2px solid #f44336;
            color: #c62828;
            padding: 20px;
            border-radius: 16px;
            margin: 16px 0;
            text-align: center;
            font-size: 1em;
            font-weight: 500;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.2);
        }
        
        .success {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            border: 2px solid #4caf50;
            color: #2e7d32;
            padding: 20px;
            border-radius: 16px;
            margin: 16px 0;
            text-align: center;
            font-size: 1em;
            font-weight: 500;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
        }
        
        .help-text {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border: 2px solid #2196f3;
            padding: 15px;
            border-radius: 12px;
            margin-top: 10px;
            color: #1565c0;
            font-size: 0.9em;
            box-shadow: 0 2px 10px rgba(33, 150, 243, 0.15);
        }
        
        .help-text strong {
            color: #0d47a1;
        }
        
        .footer {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 25px;
            text-align: center;
            margin-top: 30px;
            font-size: 0.9em;
        }
        
        .footer .logo-footer {
            font-size: 1.2em;
            font-weight: 700;
            margin-bottom: 8px;
            color: #e74c3c;
        }
        
        .footer .tagline-footer {
            font-style: italic;
            opacity: 0.9;
            margin-bottom: 15px;
        }
        
        .footer a {
            color: #e74c3c;
            text-decoration: none;
            font-weight: 600;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .status-bar {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(44, 62, 80, 0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            z-index: 1000;
            backdrop-filter: blur(10px);
            display: none;
        }
        
        .status-bar.show {
            display: block;
            animation: slideInRight 0.3s ease-out;
        }
        
        /* Styles d'impression optimis√©s */
        @media print {
            .header,
            .player-management,
            .button-group,
            .status-bar,
            .express-banner,
            .premium-header,
            .auth-overlay,
            .session-stats,
            .results-actions,
            .footer {
                display: none !important;
            }
            
            body {
                background: white !important;
                padding: 0 !important;
            }
            
            .container {
                background: white !important;
                box-shadow: none !important;
                border-radius: 0 !important;
                margin: 0 !important;
                max-width: 100% !important;
            }
            
            .results {
                box-shadow: none !important;
                border: none !important;
                background: white !important;
                padding: 20px 0 !important;
                margin: 0 !important;
            }
            
            .results h2 {
                color: #000 !important;
                background: none !important;
                -webkit-text-fill-color: #000 !important;
                font-size: 1.8em !important;
                margin-bottom: 20px;
                text-align: center;
                border-bottom: 2px solid #000;
                padding-bottom: 10px;
            }
            
            .summary {
                background: #f8f9fa !important;
                border: 1px solid #000 !important;
                page-break-inside: avoid;
                margin-bottom: 20px !important;
            }
            
            .summary-item {
                background: #e9ecef !important;
                color: #000 !important;
                border: 1px solid #666 !important;
                margin: 5px !important;
                font-size
